{"version":3,"sources":["gyro.page.js","index.page.js"],"names":["Gyro","init","steering","acceleration","ball","document","querySelector","garden","output","initial","maxAcceleration","maxSteering","initinalSteering","initinalAcceleration","maxX","clientWidth","maxY","clientHeight","addEventListener","initinalTest","test","innerHTML","window","event","x","gamma","y","beta","z","alpha","Math","round","currentSteering","currentAcceleration","currentTest","abs","style","left","top","readyState"],"mappings":"AAAA,IAAIA,KAAO,CACTC,KAAM,WACJ,IAMIC,EACAC,EAPAC,EAAOC,SAASC,cAAc,SAC9BC,EAASF,SAASC,cAAc,WAChCE,EAASH,SAASC,cAAc,WAChCG,EAAUJ,SAASC,cAAc,YACjCI,EAAkB,EAClBC,EAAc,EAGdC,EAAmB,GACnBC,EAAuB,GACvBC,EAAOP,EAAOQ,YAAcX,EAAKW,YACjCC,EAAOT,EAAOU,aAAeb,EAAKa,aAkDrBZ,SAASC,cAAc,eAC7BY,iBAAiB,QAE5B,WACEN,EAAmBV,EACnBW,EAAuBV,EACvBgB,aAAeC,KACfX,EAAQY,UAAY,qBAAuBnB,EAAW,KACtDO,EAAQY,WAAa,wBAA0BlB,EAAe,KAC9DM,EAAQY,WAAa,aAAeD,KAAO,OAG7CE,OAAOJ,iBAAiB,oBA5DxB,SAA2BK,GACzB,IAAIC,EAAID,EAAME,MAEVC,EAAIH,EAAMI,KAEVC,EAAIL,EAAMM,MACd3B,EAAW4B,KAAKC,MAAML,GACtBvB,EAAe2B,KAAKC,MAAMP,GAC1BJ,KAAOU,KAAKC,MAAMH,GAClB,IAAII,EAAkB9B,EAAWU,EAC7BqB,EAAsBH,KAAKC,MAAMP,GAAKX,EACtCqB,EAAcd,KAAOD,aAErBW,KAAKK,IAAIH,IAAoBrB,IAC/BqB,EAAkBA,EAAkB,GAAmB,EAAfrB,EAAmBA,GAGzDmB,KAAKK,IAAIF,GAAuBvB,IAClCuB,EAAsBA,EAAsB,GAAKvB,EAAkBA,GAGrEuB,GAAuBA,EACvBzB,EAAOa,UAAY,cAAgBW,EAAkB,KACrDxB,EAAOa,WAAa,iBAAmBY,EAAsB,KAC7DzB,EAAOa,WAAa,MAAQa,EAAc,KAGtCF,EAAkB,KACpBA,EAAkB,IAKhBA,GAAmB,KACrBA,GAAmB,IAMrBA,GAAmB,GACnBC,GAAuB,GAGvB7B,EAAKgC,MAAMC,KAAOvB,EAAOkB,EAAkB,IAAM,GAAK,KACtD5B,EAAKgC,MAAME,IAAMtB,EAAOiB,EAAsB,IAAM,GAAK,SAmBnC,aAAxB5B,SAASkC,WACXtC,OAEAI,SAASa,iBAAiB,mBAAoB,WAC5CjB,SASJA,KAAO,WACLD,KAAKC","sourcesContent":["const Gyro = {\n  init: () => {\n    var ball = document.querySelector('.ball');\n    var garden = document.querySelector('.garden');\n    var output = document.querySelector('.output');\n    var initial = document.querySelector('.initial');\n    var maxAcceleration = 7;\n    var maxSteering = 7;\n    var steering;\n    var acceleration;\n    var initinalSteering = 15;\n    var initinalAcceleration = 15;\n\n    var maxX = garden.clientWidth - ball.clientWidth;\n    var maxY = garden.clientHeight - ball.clientHeight;\n\n    function handleOrientation(event) {\n\n      var x = event.gamma; // In degree in the range [-90,90]\n      var y = event.beta;  // In degree in the range [-180,180]\n      var z = event.alpha;\n\n      steering = Math.round(y);\n      acceleration = Math.round(x);\n      test = Math.round(z);\n\n\n      var currentSteering = steering - initinalSteering;\n      var currentAcceleration = Math.round(x) - initinalAcceleration;\n      var currentTest = test - initinalTest;\n\n      if (Math.abs(currentSteering) >= maxSteering) {\n        currentSteering = (currentSteering < 0 ? maxSteering * (-1) : maxSteering);\n      }\n\n      if (Math.abs(currentAcceleration) > maxAcceleration) {\n        currentAcceleration = (currentAcceleration < 0 ? -maxAcceleration : maxAcceleration);\n      }\n\n      currentAcceleration = -currentAcceleration;\n\n      output.innerHTML = \"steering : \" + currentSteering + \"\\n\";\n      output.innerHTML += \"acceleration: \" + currentAcceleration + \"\\n\";\n      output.innerHTML += \"z: \" + currentTest + \"\\n\";\n\n      // Because we don't want to have the device upside down\n      // We constrain the x value to the range [-90,90]\n      if (currentSteering > 90) { currentSteering = 90 };\n      if (currentSteering < -90) { currentSteering = -90 };\n\n      // To make computation easier we shift the range of \n      // x and y to [0,180]\n      currentSteering += 90;\n      currentAcceleration += 90;\n\n      // 10 is half the size of the ball\n      // It center the positioning point to the center of the ball\n      ball.style.left = (maxX * currentSteering / 180 - 10) + \"px\";\n      ball.style.top = (maxY * currentAcceleration / 180 - 10) + \"px\";\n    }\n\n    var initButton = document.querySelector('[data-init]');\n    initButton.addEventListener('click', handleInitClick);\n\n    function handleInitClick() {\n      initinalSteering = steering;\n      initinalAcceleration = acceleration;\n      initinalTest = test;\n      initial.innerHTML = \"initialSteering : \" + steering + \"\\n\";\n      initial.innerHTML += \"initialAcceleration: \" + acceleration + \"\\n\";\n      initial.innerHTML += \"initialZ: \" + test + \"\\n\";\n\n\n    }\n\n    window.addEventListener('deviceorientation', handleOrientation);\n  }\n}","/* === On DOM load === */\n\nif(document.readyState === 'complete') {\n  init();\n} else {\n  document.addEventListener('DOMContentLoaded', () => {\n    init();\n  });\n}\n\n/**\n * Init function, executed on document load\n * Move all functions which need to be executed on pageload here\n */\ninit = () => {\n  Gyro.init();\n}\n"],"file":"script.min.js"}