{"version":3,"sources":["gyro.page.js","index.page.js","rc-audio.js"],"names":["Gyro","init","steering","acceleration","ball","document","querySelector","garden","output","initial","maxAcceleration","maxSteering","initinalSteering","initinalAcceleration","maxX","clientWidth","maxY","clientHeight","addEventListener","initinalTest","test","innerHTML","window","event","x","gamma","y","beta","z","alpha","Math","round","currentSteering","currentAcceleration","currentTest","abs","style","left","top","readyState","_this","this","RCAudio","engine1Rate","engine2Rate","rateRiseEngine1","rateRiseEngine2","engine1Volume","engine2Volume","volumeRiseEngine1","volumeRiseEngine2","engine1","Howl","src","autoplay","loop","sprite","middle","end","volume","engine2","startEngine","dynEngine1","play","dynEngine2","modifyEngine","stopEngine","stop","rate","faster","louder","slower","weaker"],"mappings":"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","sourcesContent":["const Gyro = {\n  init: () => {\n    var ball = document.querySelector('.ball');\n    var garden = document.querySelector('.garden');\n    var output = document.querySelector('.output');\n    var initial = document.querySelector('.initial');\n    var maxAcceleration = 7;\n    var maxSteering = 7;\n    var steering;\n    var acceleration;\n    var initinalSteering = 15;\n    var initinalAcceleration = 15;\n\n    var maxX = garden.clientWidth - ball.clientWidth;\n    var maxY = garden.clientHeight - ball.clientHeight;\n\n    function handleOrientation(event) {\n\n      var x = event.gamma; // In degree in the range [-90,90]\n      var y = event.beta;  // In degree in the range [-180,180]\n      var z = event.alpha;\n\n      steering = Math.round(y);\n      acceleration = Math.round(x);\n      test = Math.round(z);\n\n\n      var currentSteering = steering - initinalSteering;\n      var currentAcceleration = Math.round(x) - initinalAcceleration;\n      var currentTest = test - initinalTest;\n\n      if (Math.abs(currentSteering) >= maxSteering) {\n        currentSteering = (currentSteering < 0 ? maxSteering * (-1) : maxSteering);\n      }\n\n      if (Math.abs(currentAcceleration) > maxAcceleration) {\n        currentAcceleration = (currentAcceleration < 0 ? -maxAcceleration : maxAcceleration);\n      }\n\n      currentAcceleration = -currentAcceleration;\n\n      output.innerHTML = \"steering : \" + currentSteering + \"\\n\";\n      output.innerHTML += \"acceleration: \" + currentAcceleration + \"\\n\";\n      output.innerHTML += \"z: \" + currentTest + \"\\n\";\n\n      // Because we don't want to have the device upside down\n      // We constrain the x value to the range [-90,90]\n      if (currentSteering > 90) { currentSteering = 90 };\n      if (currentSteering < -90) { currentSteering = -90 };\n\n      // To make computation easier we shift the range of \n      // x and y to [0,180]\n      currentSteering += 90;\n      currentAcceleration += 90;\n\n      // 10 is half the size of the ball\n      // It center the positioning point to the center of the ball\n      ball.style.left = (maxX * currentSteering / 180 - 10) + \"px\";\n      ball.style.top = (maxY * currentAcceleration / 180 - 10) + \"px\";\n    }\n\n    var initButton = document.querySelector('[data-init]');\n    initButton.addEventListener('click', handleInitClick);\n\n    function handleInitClick() {\n      initinalSteering = steering;\n      initinalAcceleration = acceleration;\n      initinalTest = test;\n      initial.innerHTML = \"initialSteering : \" + steering + \"\\n\";\n      initial.innerHTML += \"initialAcceleration: \" + acceleration + \"\\n\";\n      initial.innerHTML += \"initialZ: \" + test + \"\\n\";\n\n\n    }\n\n    window.addEventListener('deviceorientation', handleOrientation);\n  }\n}","/* === On DOM load === */\n\nif(document.readyState === 'complete') {\n  init();\n} else {\n  document.addEventListener('DOMContentLoaded', () => {\n    init();\n  });\n}\n\n/**\n * Init function, executed on document load\n * Move all functions which need to be executed on pageload here\n */\ninit = () => {\n  Gyro.init();\n}\n","const RCAudio = {\n  init: () => {\n\n    this.engine1Rate = 1.0;\n    this.engine2Rate = 1.1;\n    this.rateRiseEngine1 = 0.1;\n    this.rateRiseEngine2 = 0.3;\n\n    this.engine1Volume = 10;\n    this.engine2Volume = 2;\n    this.volumeRiseEngine1 = 1;\n    this.volumeRiseEngine2 = 5;\n    \n  \n    this.engine1 = new Howl({\n      src: ['assets/audio/car-engine-3.mp3'],\n      autoplay: false,\n      loop: true,\n      sprite: {\n        middle: [20, 100],\n        end: [0,20]\n      },\n      volume: this.engine1Volume\n    });\n    \n    this.engine2 = new Howl({\n      src: ['assets/audio/car-engine-2.mp3'],\n      autoplay: false,\n      loop: true,\n      sprite: {\n        middle: [30, 90],\n        end: [0,20]\n      },\n      volume: this.engine2Volume\n    });\n\n\n\n    RCAudio.startEngine();\n\n  },\n\n  startEngine: () => { \n\n    this.dynEngine1 = this.engine1.play('middle');\n    this.dynEngine2 = this.engine2.play('middle');\n\n    RCAudio.modifyEngine();\n  },\n\n  stopEngine: () => { \n    this.engine1.stop();\n    this.engine2.stop();\n  },\n\n  modifyEngine: () => { \n    this.engine1.rate(this.engine1Rate, this.dynEngine1);\n    this.engine2.rate(this.engine2Rate, this.dynEngine2);\n\n    this.engine1.volume(this.engine1Volume, this.dynEngine1);\n    this.engine2.volume(this.engine2Volume, this.dynEngine1);\n  },\n\n  faster: () => { \n    this.engine1Rate += this.rateRiseEngine1;\n    this.engine2Rate += this.rateRiseEngine2;\n    RCAudio.louder();\n    RCAudio.modifyEngine();\n  },\n\n  slower: () => { \n    this.engine1Rate -= this.rateRiseEngine1;\n    this.engine2Rate -= this.rateRiseEngine2;\n    RCAudio.louder();\n    RCAudio.modifyEngine();\n  },\n\n  louder: () => { \n    this.engine1Volume += this.volumeRiseEngine1;\n    this.engine2Volume += this.volumeRiseEngine2;\n\n    RCAudio.modifyEngine();\n  },\n\n  weaker: () => { \n    this.engine1Volume -= this.volumeRiseEngine1;\n    this.engine2Volume -= this.volumeRiseEngine2;\n\n    RCAudio.modifyEngine();\n  }\n}\n\nRCAudio.init();\n\n\n\n\n\n"],"file":"script.min.js"}